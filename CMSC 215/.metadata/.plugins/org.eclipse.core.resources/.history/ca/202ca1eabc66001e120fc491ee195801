package application;
	
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import javafx.application.Application;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.stage.Stage;
import javafx.scene.Scene;
import javafx.scene.control.Alert;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.TextField;
import javafx.scene.control.Alert.AlertType;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.GridPane;


public class Project4 extends Application {
	@Override
	public void start(Stage primaryStage) {
		try {
			//Create pane and set properties
			GridPane grid = new GridPane();
			grid.setAlignment(Pos.CENTER);
		    grid.setPadding(new Insets(11.5, 12.5, 13.5, 14.5));
		    grid.setHgap(5.5); 
		    grid.setVgap(5.5);
		    
		    //Row 1
		    grid.add(new Label("Start Time"), 1, 0);
			grid.add(new Label("End Time"), 2, 0);
			
			//Row 2
			grid.add(new Label("Time Interval 1"), 0, 1);
			TextField intervalOneStartTf = new TextField();
			TextField intervalOneEndTf = new TextField();
			grid.add(intervalOneStartTf, 1, 1);
			grid.add(intervalOneEndTf, 2, 1);
			
			//Row 3
			grid.add(new Label("Time Interval 2"), 0, 2);
			TextField intervalTwoStartTf = new TextField();
			TextField intervalTwoEndTf = new TextField();
			grid.add(intervalTwoStartTf, 1, 2);
			grid.add(intervalTwoEndTf, 2, 2);
			
			//Row 4
			Button compareIntervals = new Button("\t\t\t\t\t  Compare Intervals \t\t\t\t\t");
			GridPane.setColumnSpan(compareIntervals, 3);
			grid.add(compareIntervals, 0, 3);
			
			//Row 5
			grid.add(new Label("Time to Check"), 0, 4);
			TextField timeToCheckTf = new TextField();
			GridPane.setColumnSpan(timeToCheckTf, 2);
			grid.add(timeToCheckTf, 1, 4);
			
			//Row 6
			Button checkTime = new Button("\t\t\t\t\t Check Time\t\t\t\t\t\t\t");
			GridPane.setColumnSpan(checkTime, 3);
			grid.add(checkTime, 0, 5);
			
			//Row 7
			TextField outputTf = new TextField();
			GridPane.setColumnSpan(outputTf, 3);
			grid.add(outputTf, 0, 6);
			
			//Button events
			compareIntervals.setOnAction(e -> {
				//Retreive input from textFields
				String inputInt1Start = intervalOneStartTf.getText();
				String inputInt1End = intervalOneEndTf.getText();
				String inputInt2Start = intervalTwoStartTf.getText();
				String inputInt2End = intervalTwoEndTf.getText();
				
				//Validate input is in the correct format
				if(isValidTime(inputInt1Start) && isValidTime(inputInt1End) && 
						isValidTime(inputInt2Start) && isValidTime(inputInt2End)) {
					
				} else {
					Alert alert = new Alert(AlertType.ERROR);
		    		alert.setTitle("Error");
		    		alert.setHeaderText(null);
		    		alert.setContentText("Please fill all fields in the correct format. I.e '12:00 AM'");
		    		alert.showAndWait();
				}
			});
			
			Scene scene = new Scene(grid,500,300);
			scene.getStylesheets().add(getClass().getResource("application.css").toExternalForm());
			primaryStage.setTitle("Time Interval Checker");
			primaryStage.setScene(scene);
			primaryStage.show();
		} catch(Exception e) {
			e.printStackTrace();
		}
	}
	
	//Use Regex to set the time format and return true if input matches format
	private boolean isValidTime(String input) {
		// Define a regular expression pattern for a valid time format (e.g., '12:00 AM/PM')
        String timePattern = "^(0?[1-9]|1[0-2]):[0-5][0-9] (AM|PM)$";
        
        // Create a Pattern object and a Matcher for the input string
        Pattern pattern = Pattern.compile(timePattern);
        Matcher matcher = pattern.matcher(input);

        // Check if the input matches the pattern
        return matcher.matches();
	}
	
	public static void main(String[] args) {
		launch(args);
	}
}
